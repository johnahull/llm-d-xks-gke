---
# HTTPRoute for Qwen - matches BBR-injected header
apiVersion: gateway.networking.k8s.io/v1
kind: HTTPRoute
metadata:
  name: qwen-model-route
  namespace: llm-d-inference-scheduling
spec:
  parentRefs:
  - group: gateway.networking.k8s.io
    kind: Gateway
    name: infra-pattern1-inference-gateway
  rules:
  - matches:
    - path:
        type: PathPrefix
        value: /v1/
      headers:
      - type: Exact
        name: X-Gateway-Base-Model-Name
        value: "Qwen/Qwen2.5-3B-Instruct"  # Slashes OK in header value
    backendRefs:
    - group: inference.networking.k8s.io
      kind: InferencePool
      name: qwen-pool
---
# HTTPRoute for Phi-3 - matches BBR-injected header
apiVersion: gateway.networking.k8s.io/v1
kind: HTTPRoute
metadata:
  name: phi-model-route
  namespace: llm-d-inference-scheduling
spec:
  parentRefs:
  - group: gateway.networking.k8s.io
    kind: Gateway
    name: infra-pattern1-inference-gateway
  rules:
  - matches:
    - path:
        type: PathPrefix
        value: /v1/
      headers:
      - type: Exact
        name: X-Gateway-Base-Model-Name
        value: "microsoft/Phi-3-mini-4k-instruct"  # Slashes OK in header value
    backendRefs:
    - group: inference.networking.k8s.io
      kind: InferencePool
      name: phi-pool
